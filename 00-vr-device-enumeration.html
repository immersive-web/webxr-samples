<!doctype html>
<!--
Copyright 2017 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>00 - VR Device Enumeration</title>

    <link href="css/common.css" rel="stylesheet"></link>

    <style>
      main {
        position: relative;
        z-index: 2;
      }

      article {
        border-bottom: 1px solid #888;
      }

      article h1 {
        font-size: 1.2em;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>00 - VR Device Enumeration</h1>
      <p>
        This sample queries the available VRDevices and prints out a brief
        summary of each. This sample does not render anything to the VRDevice.
      </p>
    </header>
    <main id="results">

    </main>
    <script>
      (function () {
      "use strict";

      let results = document.getElementById("results");

      // Is WebVR available on this UA?
      if (navigator.vr) {
        // Request a list of all the VRDevices connected to the system.
        navigator.vr.getDevices().then((devices) => {
          if (devices.length == 0) {
            results.innerHTML = "WebVR supported, but no VRDevices found.";
            return;
          }

          // Add an element for the page for each device.
          for (let device of devices) {
            let deviceElement = document.createElement("article");

            let deviceName = document.createElement("h1");
            deviceName.innerHTML = device.deviceName;
            deviceElement.appendChild(deviceName);

            let ul = document.createElement("ul");

            function addAttributeLabel(name, value) {
              let li = document.createElement("li");
              li.innerHTML = `<b>${name}:</b> <span>${value}</span>`;
              ul.appendChild(li);
            }

            addAttributeLabel("isExternal", device.isExternal);

            deviceElement.appendChild(ul);
            results.appendChild(deviceElement);
          }
        });
      } else {
        results.innerHTML = "WebVR not supported.";
      }

      })();
    </script>
  </body>
</html>
