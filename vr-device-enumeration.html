<!doctype html>
<!--
Copyright 2017 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, user-scalable=no'>
    <meta name='mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-capable' content='yes'>

    <title>VR Device Enumeration</title>

    <link href='css/common.css' rel='stylesheet'></link>

    <style>
      main {
        position: relative;
        z-index: 2;
      }

      article {
        border-bottom: 1px solid #888;
      }

      article h1 {
        font-size: 1.2em;
      }
    </style>
  </head>
  <body>
    <header>
      <details open>
        <summary>VR Device Enumeration</summary>
        <p>
          This sample queries an available VRDevices and prints out a brief
          summary of it. This sample does not render anything to the VRDevice.
        </p>
      </details>
    </header>
    <main id='results'>

    </main>
    <script>
      (function () {
      'use strict';

      let results = document.getElementById('results');

      // Is WebVR available on this User Agent?
      if (navigator.vr) {
        // Request a VRDevice connected to the system.
        navigator.vr.requestDevice().then((device) => {
          if (!device) {
            results.innerHTML = 'WebVR supported, but no VRDevice found.';
            return;
          }

          // Add an element for the page for the device.
          let deviceElement = document.createElement('article');

          let deviceName = document.createElement('h1');
          deviceName.innerHTML = "VRDevice";
          deviceElement.appendChild(deviceName);

          let ul = document.createElement('ul');

          function addAttributeLabel(name, value) {
            let li = document.createElement('li');
            li.innerHTML = `<b>${name}:</b> <span>${value}</span>`;
            ul.appendChild(li);
          }

          addAttributeLabel('external', device.external);

          deviceElement.appendChild(ul);
          results.appendChild(deviceElement);
        });
      } else {
        results.innerHTML = 'WebVR not supported.';
      }

      })();
    </script>
  </body>
</html>
